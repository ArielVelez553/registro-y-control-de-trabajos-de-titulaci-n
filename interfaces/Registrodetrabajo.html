<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar Trabajo - Sistema de Registro y Control de Trabajos de Titulaci√≥n</title>
    <link rel="stylesheet" href="../css/Registrodetrabajo.css">
</head>
<body>
    <!-- Barra superior -->
    <header class="top-header">
        <div class="container header-container">
            <div class="window-controls">
                <div class="circle red"></div>
                <div class="circle yellow"></div>
                <div class="circle green"></div>
            </div>
        </div>
    </header>

    <!-- Barra de navegaci√≥n -->
    <nav class="navbar">
        <div class="container nav-container">
            <div class="nav-logo">
                <img src="../Imagenes/Logouleam.png" alt="ULEAM Logo">
                <div class="nav-logo-text">
                    <span class="university-name">Uleam</span>
                    <span class="university-fullname">ELOY ALFARO DE MANAB√ç</span>
                </div>
            </div>
            
            <div class="nav-menu">
                <a href="#" class="nav-link">Inicio</a>
                <a href="#" class="nav-link">Selecci√≥n de Tema</a>
                <a href="#" class="nav-link active">Registrar Trabajo</a>
                <a href="#" class="nav-link">Avances</a>
                <a href="#" class="nav-link logout">Cerrar Sesi√≥n</a>
            </div>
        </div>
    </nav>

    <!-- Contenido principal -->
    <main class="main-content">
        <div class="container">
            <!-- Informaci√≥n del proyecto -->
            <div class="project-header">
                <div class="project-info">
                    <h1 class="project-title">Sistema de gesti√≥n hospitalaria con inteligencia artificial</h1>
                    <div class="project-meta">
                        <span class="meta-item">
                            <strong>Estudiante:</strong> Mar√≠a Gonz√°lez P√©rez
                        </span>
                        <span class="meta-item">
                            <strong>Tutor:</strong> Dr. Carlos Mendoza
                        </span>
                        <span class="meta-item">
                            <strong>Carrera:</strong> Ingenier√≠a en Sistemas
                        </span>
                    </div>
                </div>
                <div class="project-status">
                    <span class="status-badge in-progress">En Desarrollo</span>
                </div>
            </div>

            <!-- Secci√≥n de subida de documentos -->
            <div class="upload-section">
                <h2 class="section-title">
                    <span class="section-icon">üì§</span>
                    Subir Nuevo Avance
                </h2>
                
                <form class="upload-form" id="uploadForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="document-type">Tipo de Entrega</label>
                            <select id="document-type" name="document-type" required>
                                <option value="">Selecciona el tipo</option>
                                <option value="propuesta">Propuesta Inicial</option>
                                <option value="marco-teorico">Marco Te√≥rico</option>
                                <option value="metodologia">Metodolog√≠a</option>
                                <option value="desarrollo">Desarrollo/Implementaci√≥n</option>
                                <option value="resultados">Resultados y An√°lisis</option>
                                <option value="conclusiones">Conclusiones</option>
                                <option value="documento-final">Documento Final</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="version">Versi√≥n del Documento</label>
                            <input type="text" id="version" name="version" placeholder="ej: v1.0, v2.1" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="description">Descripci√≥n del Avance</label>
                        <textarea id="description" name="description" rows="4" placeholder="Describe los cambios, mejoras o nuevo contenido incluido en esta entrega..." required></textarea>
                    </div>
                    
                    <div class="file-upload-container">
                        <input type="file" id="document-file" name="document-file" accept=".pdf,.doc,.docx" hidden>
                        <div class="upload-area" onclick="document.getElementById('document-file').click()">
                            <div class="upload-content">
                                <div class="upload-icon">üìÅ</div>
                                <p class="upload-text">Arrastra tu archivo aqu√≠ o haz clic para seleccionar</p>
                                <p class="upload-subtext">Formatos permitidos: PDF, DOC, DOCX (m√°x. 15MB)</p>
                            </div>
                        </div>
                        <div class="file-preview" id="filePreview" style="display: none;">
                            <div class="file-info">
                                <span class="file-icon">üìÑ</span>
                                <div class="file-details">
                                    <span class="file-name" id="fileName"></span>
                                    <span class="file-size" id="fileSize"></span>
                                </div>
                                <button type="button" class="remove-file" onclick="removeFile()">‚úï</button>
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" class="submit-btn">
                        <span class="btn-icon">‚¨ÜÔ∏è</span>
                        Enviar Documento para Revisi√≥n
                    </button>
                </form>
            </div>

            <!-- Documentos pendientes de revisi√≥n -->
            <div class="pending-review-section">
                <h2 class="section-title">
                    <span class="section-icon">‚è≥</span>
                    Documentos en Revisi√≥n
                </h2>
                
                <div class="documents-grid">
                    <div class="document-card pending">
                        <div class="document-header">
                            <div class="document-type">Marco Te√≥rico</div>
                            <div class="document-status">Pendiente</div>
                        </div>
                        <div class="document-info">
                            <h3>Marco Te√≥rico - Segunda Versi√≥n</h3>
                            <p class="document-meta">v2.0 ‚Ä¢ Subido el 28/05/2025 ‚Ä¢ 3.2 MB</p>
                            <p class="document-description">Versi√≥n corregida con nuevas referencias bibliogr√°ficas y ampliaci√≥n de la secci√≥n sobre IA en salud.</p>
                        </div>
                        <div class="document-actions">
                            <button class="action-btn view">üëÅÔ∏è Ver</button>
                            <button class="action-btn download">‚¨áÔ∏è Descargar</button>
                        </div>
                    </div>
                    
                    <div class="document-card reviewing">
                        <div class="document-header">
                            <div class="document-type">Metodolog√≠a</div>
                            <div class="document-status">En Revisi√≥n</div>
                        </div>
                        <div class="document-info">
                            <h3>Metodolog√≠a de Desarrollo</h3>
                            <p class="document-meta">v1.0 ‚Ä¢ Subido el 25/05/2025 ‚Ä¢ 2.8 MB</p>
                            <p class="document-description">Metodolog√≠a completa con enfoque en desarrollo √°gil y t√©cnicas de machine learning.</p>
                        </div>
                        <div class="document-actions">
                            <button class="action-btn view">üëÅÔ∏è Ver</button>
                            <button class="action-btn download">‚¨áÔ∏è Descargar</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Secci√≥n de calificaci√≥n del profesor (solo visible para profesores) -->
            <div class="professor-section" id="professorSection">
                <h2 class="section-title professor-title">
                    <span class="section-icon">üë®‚Äçüè´</span>
                    Panel de Evaluaci√≥n - Profesor
                </h2>
                
                <div class="evaluation-container">
                    <div class="document-to-evaluate">
                        <h3>Documento a Evaluar</h3>
                        <div class="eval-document-card" id="selectedDocumentCard">
                            <div class="eval-document-info">
                                <h4 id="selectedDocumentTitle">Seleccione un documento para evaluar</h4>
                                <p id="selectedStudentName">-</p>
                                <p id="selectedDocumentDate">-</p>
                                <p id="selectedDocumentType">-</p>
                            </div>
                            <div class="eval-document-actions">
                                <button class="eval-btn view" id="reviewDocumentBtn" onclick="openDocumentSelector()">üìñ Revisar Documento</button>
                                <button class="eval-btn download" id="downloadDocumentBtn" disabled>‚¨áÔ∏è Descargar</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="evaluation-form">
                        <h3>Evaluaci√≥n y Calificaci√≥n</h3>
                        <form class="grading-form" id="gradingForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="grade">Calificaci√≥n (0-10)</label>
                                    <input type="number" id="grade" name="grade" min="0" max="10" step="0.1" placeholder="8.5">
                                </div>
                                
                                <div class="form-group">
                                    <label for="status">Estado de Evaluaci√≥n</label>
                                    <select id="status" name="status" required>
                                        <option value="">Seleccionar estado</option>
                                        <option value="aprobado">Aprobado</option>
                                        <option value="aprobado-observaciones">Aprobado con Observaciones</option>
                                        <option value="requiere-correccion">Requiere Correcci√≥n</option>
                                        <option value="rechazado">Rechazado</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="feedback">Comentarios y Retroalimentaci√≥n</label>
                                <textarea id="feedback" name="feedback" rows="6" placeholder="Proporciona comentarios detallados sobre el trabajo, sugerencias de mejora, fortalezas identificadas, etc." required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="recommendations">Recomendaciones para Pr√≥xima Entrega</label>
                                <textarea id="recommendations" name="recommendations" rows="4" placeholder="Indica qu√© aspectos debe trabajar el estudiante para la siguiente entrega..."></textarea>
                            </div>
                            
                            <div class="evaluation-actions">
                                <button type="button" class="eval-action-btn secondary">üíæ Guardar Borrador</button>
                                <button type="submit" class="eval-action-btn primary">‚úÖ Enviar Evaluaci√≥n</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Historial de evaluaciones recientes -->
            <div class="recent-evaluations">
                <h2 class="section-title">
                    <span class="section-icon">üìã</span>
                    Evaluaciones Recientes
                </h2>
                
                <div class="evaluations-list">
                    <div class="evaluation-item approved">
                        <div class="eval-header">
                            <div class="eval-document">Propuesta Inicial</div>
                            <div class="eval-grade">9.0</div>
                            <div class="eval-status">Aprobado</div>
                            <div class="eval-date">20/05/2025</div>
                        </div>
                        <div class="eval-feedback">
                            <p><strong>Comentarios:</strong> Excelente propuesta con objetivos claros y metodolog√≠a bien definida. La justificaci√≥n del proyecto es s√≥lida.</p>
                        </div>
                    </div>
                    
                    <div class="evaluation-item corrections">
                        <div class="eval-header">
                            <div class="eval-document">Marco Te√≥rico - Primera Versi√≥n</div>
                            <div class="eval-grade">7.5</div>
                            <div class="eval-status">Requiere Correcci√≥n</div>
                            <div class="eval-date">15/05/2025</div>
                        </div>
                        <div class="eval-feedback">
                            <p><strong>Comentarios:</strong> Buen trabajo inicial, pero necesita ampliar las referencias sobre IA en el sector salud. Revisar formato APA en las citas.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal para seleccionar documento -->
    <div class="modal-overlay" id="documentSelectorModal">
        <div class="modal-container">
            <div class="modal-header">
                <h2>Seleccionar Documento para Evaluar</h2>
                <button class="modal-close" onclick="closeDocumentSelector()">‚úï</button>
            </div>
            
            <div class="modal-content">
                <!-- Filtros de b√∫squeda -->
                <div class="search-filters">
                    <div class="search-box">
                        <input type="text" id="studentSearch" placeholder="Buscar por nombre de estudiante..." class="search-input">
                        <button class="search-btn">üîç</button>
                    </div>
                    <div class="filter-options">
                        <select id="careerFilter" class="filter-select">
                            <option value="">Todas las carreras</option>
                            <option value="sistemas">Ing. Sistemas</option>
                            <option value="ti">Ing. TI</option>
                            <option value="software">Ing. Software</option>
                            <option value="redes">Ing. Redes</option>
                            <option value="ciberseguridad">Ing. Ciberseguridad</option>
                        </select>
                        <select id="statusFilter" class="filter-select">
                            <option value="">Todos los estados</option>
                            <option value="pendiente">Pendiente</option>
                            <option value="revision">En Revisi√≥n</option>
                        </select>
                        <select id="documentTypeFilter" class="filter-select">
                            <option value="">Todos los tipos</option>
                            <option value="propuesta">Propuesta</option>
                            <option value="marco-teorico">Marco Te√≥rico</option>
                            <option value="metodologia">Metodolog√≠a</option>
                            <option value="desarrollo">Desarrollo</option>
                            <option value="resultados">Resultados</option>
                            <option value="conclusiones">Conclusiones</option>
                        </select>
                    </div>
                </div>
                
                <!-- Lista de documentos -->
                <div class="documents-list">
                    <div class="document-item" data-student="Mar√≠a Gonz√°lez P√©rez" data-career="sistemas" data-status="pendiente" data-type="marco-teorico">
                        <div class="document-item-header">
                            <div class="student-info">
                                <h4>Mar√≠a Gonz√°lez P√©rez</h4>
                                <span class="career-badge">Ing. Sistemas</span>
                            </div>
                            <div class="document-status-badge pendiente">Pendiente</div>
                        </div>
                        <div class="document-item-content">
                            <h5>Marco Te√≥rico - Segunda Versi√≥n</h5>
                            <p class="document-details">v2.0 ‚Ä¢ Subido el 28/05/2025 ‚Ä¢ 3.2 MB</p>
                            <p class="document-preview">Sistema de gesti√≥n hospitalaria con inteligencia artificial - Versi√≥n corregida con nuevas referencias...</p>
                        </div>
                        <div class="document-item-actions">
                            <button class="select-document-btn" onclick="selectDocument('Mar√≠a Gonz√°lez P√©rez', 'Marco Te√≥rico - Segunda Versi√≥n', '28/05/2025', 'Marco Te√≥rico ‚Ä¢ v2.0')">
                                Seleccionar
                            </button>
                        </div>
                    </div>
                    
                    <div class="document-item" data-student="Juan Carlos Rodr√≠guez" data-career="redes" data-status="revision" data-type="metodologia">
                        <div class="document-item-header">
                            <div class="student-info">
                                <h4>Juan Carlos Rodr√≠guez</h4>
                                <span class="career-badge">Ing. Redes</span>
                            </div>
                            <div class="document-status-badge revision">En Revisi√≥n</div>
                        </div>
                        <div class="document-item-content">
                            <h5>Metodolog√≠a de Desarrollo IoT</h5>
                            <p class="document-details">v1.0 ‚Ä¢ Subido el 25/05/2025 ‚Ä¢ 2.8 MB</p>
                            <p class="document-preview">Aplicaci√≥n m√≥vil para monitoreo de redes IoT - Metodolog√≠a completa con enfoque en desarrollo √°gil...</p>
                        </div>
                        <div class="document-item-actions">
                            <button class="select-document-btn" onclick="selectDocument('Juan Carlos Rodr√≠guez', 'Metodolog√≠a de Desarrollo IoT', '25/05/2025', 'Metodolog√≠a ‚Ä¢ v1.0')">
                                Seleccionar
                            </button>
                        </div>
                    </div>
                    
                    <div class="document-item" data-student="Ana Sof√≠a Mart√≠nez" data-career="software" data-status="pendiente" data-type="propuesta">
                        <div class="document-item-header">
                            <div class="student-info">
                                <h4>Ana Sof√≠a Mart√≠nez</h4>
                                <span class="career-badge">Ing. Software</span>
                            </div>
                            <div class="document-status-badge pendiente">Pendiente</div>
                        </div>
                        <div class="document-item-content">
                            <h5>Propuesta de Plataforma E-Learning VR</h5>
                            <p class="document-details">v1.0 ‚Ä¢ Subido el 22/05/2025 ‚Ä¢ 4.1 MB</p>
                            <p class="document-preview">Plataforma web de e-learning con realidad virtual - Propuesta inicial con objetivos y alcance...</p>
                        </div>
                        <div class="document-item-actions">
                            <button class="select-document-btn" onclick="selectDocument('Ana Sof√≠a Mart√≠nez', 'Propuesta de Plataforma E-Learning VR', '22/05/2025', 'Propuesta ‚Ä¢ v1.0')">
                                Seleccionar
                            </button>
                        </div>
                    </div>
                    
                    <div class="document-item" data-student="Roberto Andr√©s Silva" data-career="ciberseguridad" data-status="revision" data-type="desarrollo">
                        <div class="document-item-header">
                            <div class="student-info">
                                <h4>Roberto Andr√©s Silva</h4>
                                <span class="career-badge">Ing. Ciberseguridad</span>
                            </div>
                            <div class="document-status-badge revision">En Revisi√≥n</div>
                        </div>
                        <div class="document-item-content">
                            <h5>Desarrollo del Sistema de Ciberseguridad</h5>
                            <p class="document-details">v2.1 ‚Ä¢ Subido el 20/05/2025 ‚Ä¢ 5.7 MB</p>
                            <p class="document-preview">Sistema de ciberseguridad para empresas PYMES - Implementaci√≥n de m√≥dulos de detecci√≥n...</p>
                        </div>
                        <div class="document-item-actions">
                            <button class="select-document-btn" onclick="selectDocument('Roberto Andr√©s Silva', 'Desarrollo del Sistema de Ciberseguridad', '20/05/2025', 'Desarrollo ‚Ä¢ v2.1')">
                                Seleccionar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="divider"></div>

    <!-- Pie de p√°gina -->
    <footer>
        <div class="container">
            <p class="footer-text">Universidad Laica Eloy Alfaro de Manab√≠</p>
            <p class="copyright">¬© 2025 - Todos los derechos reservados</p>
        </div>
    </footer>
    <script src="../js/navegacion.js"></script>   
    <script>
        // Simulaci√≥n de rol de usuario (cambiar seg√∫n el usuario logueado)
        const userRole = 'professor'; // 'student' o 'professor'
        
        // Mostrar/ocultar secci√≥n de profesor seg√∫n el rol
        if (userRole === 'professor') {
            document.getElementById('professorSection').style.display = 'block';
        } else {
            document.getElementById('professorSection').style.display = 'none';
        }

        // Funciones para el modal de selecci√≥n de documentos
        function openDocumentSelector() {
            document.getElementById('documentSelectorModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeDocumentSelector() {
            document.getElementById('documentSelectorModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function selectDocument(studentName, documentTitle, date, type) {
            // Actualizar la informaci√≥n del documento seleccionado
            document.getElementById('selectedDocumentTitle').textContent = documentTitle;
            document.getElementById('selectedStudentName').textContent = `Estudiante: ${studentName}`;
            document.getElementById('selectedDocumentDate').textContent = `Fecha de entrega: ${date}`;
            document.getElementById('selectedDocumentType').textContent = `Tipo: ${type}`;
            
            // Habilitar el bot√≥n de descarga
            document.getElementById('downloadDocumentBtn').disabled = false;
            
            // Cambiar el texto del bot√≥n de revisar
            document.getElementById('reviewDocumentBtn').innerHTML = 'üìñ Cambiar Documento';
            
            // Cerrar el modal
            closeDocumentSelector();
            
            // Mostrar mensaje de confirmaci√≥n
            alert(`Documento seleccionado: ${documentTitle} de ${studentName}`);
        }

        // Funciones de filtrado
        function filterDocuments() {
            const searchTerm = document.getElementById('studentSearch').value.toLowerCase();
            const careerFilter = document.getElementById('careerFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            const typeFilter = document.getElementById('documentTypeFilter').value;
            
            const documentItems = document.querySelectorAll('.document-item');
            
            documentItems.forEach(item => {
                const studentName = item.dataset.student.toLowerCase();
                const career = item.dataset.career;
                const status = item.dataset.status;
                const type = item.dataset.type;
                
                const matchesSearch = studentName.includes(searchTerm);
                const matchesCareer = !careerFilter || career === careerFilter;
                const matchesStatus = !statusFilter || status === statusFilter;
                const matchesType = !typeFilter || type === typeFilter;
                
                if (matchesSearch && matchesCareer && matchesStatus && matchesType) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Event listeners para los filtros
        document.getElementById('studentSearch').addEventListener('input', filterDocuments);
        document.getElementById('careerFilter').addEventListener('change', filterDocuments);
        document.getElementById('statusFilter').addEventListener('change', filterDocuments);
        document.getElementById('documentTypeFilter').addEventListener('change', filterDocuments);

        // Cerrar modal al hacer clic fuera de √©l
        document.getElementById('documentSelectorModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeDocumentSelector();
            }
        });

        // Manejo del archivo
        document.getElementById('document-file').addEventListener('change', function(e) {
            const filePreview = document.getElementById('filePreview');
            const fileName = document.getElementById('fileName');
            const fileSize = document.getElementById('fileSize');
            
            if (e.target.files.length > 0) {
                const file = e.target.files[0];
                fileName.textContent = file.name;
                fileSize.textContent = (file.size / 1024 / 1024).toFixed(2) + ' MB';
                filePreview.style.display = 'block';
            }
        });

        function removeFile() {
            document.getElementById('document-file').value = '';
            document.getElementById('filePreview').style.display = 'none';
        }

        // Manejo del formulario de subida
        document.getElementById('uploadForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const documentType = formData.get('document-type');
            const version = formData.get('version');
            const description = formData.get('description');
            const file = formData.get('document-file');
            
            if (documentType && version && description && file) {
                alert('Documento enviado exitosamente para revisi√≥n');
                // Aqu√≠ ir√≠a la l√≥gica para enviar al servidor
                this.reset();
                removeFile();
            }
        });

        // Manejo del formulario de calificaci√≥n
        document.getElementById('gradingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const grade = formData.get('grade');
            const status = formData.get('status');
            const feedback = formData.get('feedback');
            
            if (grade && status && feedback) {
                alert('Evaluaci√≥n enviada exitosamente');
                // Aqu√≠ ir√≠a la l√≥gica para enviar al servidor
                this.reset();
            }
        });

        // Drag and drop functionality
        const uploadArea = document.querySelector('.upload-area');
        
        uploadArea.addEventListener('dragover', function(e) {
            e.preventDefault();
            this.classList.add('drag-over');
        });
        
        uploadArea.addEventListener('dragleave', function(e) {
            e.preventDefault();
            this.classList.remove('drag-over');
        });
        
        uploadArea.addEventListener('drop', function(e) {
            e.preventDefault();
            this.classList.remove('drag-over');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                document.getElementById('document-file').files = files;
                document.getElementById('document-file').dispatchEvent(new Event('change'));
            }
        });
    </script>
    
</body>
</html>
